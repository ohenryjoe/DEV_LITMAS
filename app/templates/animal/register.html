{% extends 'components/base.html' %}
{% load static %}

{% block title %} Subject {% endblock title %}


<!-- Specific CSS goes HERE -->
{% block stylesheets %}

{% endblock stylesheets %}

{% block content %}
    <form enctype="multipart/form-data" method="POST" novalidate>
        {% csrf_token %}
        <section class="bg-white p-1 mx-lg-5">
            <div class="page-header section-height-75">
                <div class="container">
                    <div class="row">
                        <div class="d-flex flex-column mx-auto">
                            <div class="card card-plain my-lg-5">
                                <div class="card-header pb-0 text-left bg-transparent">
                                    <h3 class="font-weight-bolder text-info text-gradient"><i
                                            class="fas fa-chart"> </i>
                                        New UNEB Division</h3>
                                    <p class="mb-0">Creating a new Division...</p>
                                </div>
                                <div class="card-body">
                                {% if messages %}
                            {% for message in messages %}
                                <div class="alert alert-{{ message.tags }} alert-dismissible show"
                                     role="alert">
                                    {% if 'danger' in message.tags %}
                                        <i class="fas fa-minus-circle">&nbsp;</i>
                                    {% elif 'success' in message.tags %}
                                        <i class="fas fa-check-circle">&nbsp;</i>
                                    {% elif 'warning' in message.tags %}
                                        <i class="fas fa-exclamation-triangle">&nbsp;</i>
                                    {% endif %}
                                    <strong>&nbsp;{{ message.tags.upper }}:&nbsp;</strong>{{ message }}
                                    <span type="button" class="btn-close-white btn-close text-lighter"
                                          data-bs-dismiss="alert"
                                          aria-label="Close"></span>
                                </div>
                            {% endfor %}
                        {% endif %}
                                    <div>
                                    </div>
                                    <div class="row bg-light p-lg-5" style="border-radius: 5px;">

                                        <form method="post" id="AnimalForm"
                                              data-divss-url="{% url 'ajax_load_breeds' %}" novalidate>
                                            {% csrf_token %}
                                            <div class="row">
                                                <div class="col-lg-5">
                                                   {{ form }}
                                                </div>
                                            </div>
                                            <div class="row col-lg-12 mt-3">
                                                <button class="btn btn-primary mx-lg-3" type="submit">
                                                    <span class="text-white">Save</span>
                                                </button>
                                                <a href="{% url 'register_animal' %}"></a>
                                            </div>
                                        </form>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </form>
{% endblock content %}

<!-- Specific JS goes HERE -->
{% block javascripts %}
    <script src="https://code.jquery.com/jquery-3.3.1.min.js"></script>
     <script>
        $("#id_animal_type").change(function () {
            var url = $("#AnimalForm").attr("data-depts-url");
            var DirectorateId = $(this).val();

            $.ajax({
                url: '/animal/ajax/load-breeds/',
                data: {
                    'directorate': DirectorateId
                },
                success: function (data) {
                    $("#id_breed").html(data);
                }
            });
        });
     </script>

    <script>
        $("#id_department").change(function () {
            var url = $("#SectionForm").attr("data-divs-url");
            var DepartmentId = $(this).val();

            $.ajax({
                url: '/Organization/ajax/load-divs/',
                data: {
                    'department': DepartmentId
                },
                success: function (data) {
                    $("#id_division").html(data);
                }
            });
        });

    </script>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>

    <script src="{% static '/assets/js/plugins/chartjs.min.js' %}"></script>
    <script src="{% static 'assets/js/plugins/Chart.extension.js' %}"></script>
    <script>
        $('.alert').alert()
        var ctx = document.getElementById("chart-bars").getContext("2d");

        new Chart(ctx, {
            type: "bar",
            data: {
                labels: ["Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec"],
                datasets: [{
                    label: "Incoming Mails",
                    tension: 0.4,
                    borderWidth: 0,
                    pointRadius: 0,
                    backgroundColor: "#fff",
                    data: [450, 200, 100, 220, 500, 100, 400, 230, 500],
                    maxBarThickness: 6
                },],
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                legend: {
                    display: false,
                },
                tooltips: {
                    enabled: true,
                    mode: "index",
                    intersect: false,
                },
                scales: {
                    yAxes: [{
                        gridLines: {
                            display: false,
                        },
                        ticks: {
                            suggestedMin: 0,
                            suggestedMax: 500,
                            beginAtZero: true,
                            padding: 0,
                            fontSize: 14,
                            lineHeight: 3,
                            fontColor: "#fff",
                            fontStyle: 'normal',
                            fontFamily: "Open Sans",
                        },
                    },],
                    xAxes: [{
                        gridLines: {
                            display: false,
                        },
                        ticks: {
                            display: false,
                            padding: 20,
                        },
                    },],
                },
            },
        });

        var ctx2 = document.getElementById("chart-line").getContext("2d");

        var gradientStroke1 = ctx2.createLinearGradient(0, 230, 0, 50);

        gradientStroke1.addColorStop(1, 'rgba(203,12,159,0.2)');
        gradientStroke1.addColorStop(0.2, 'rgba(72,72,176,0.0)');
        gradientStroke1.addColorStop(0, 'rgba(203,12,159,0)'); //purple colors

        var gradientStroke2 = ctx2.createLinearGradient(0, 230, 0, 50);

        gradientStroke2.addColorStop(1, 'rgba(20,23,39,0.2)');
        gradientStroke2.addColorStop(0.2, 'rgba(72,72,176,0.0)');
        gradientStroke2.addColorStop(0, 'rgba(20,23,39,0)'); //purple colors


        new Chart(ctx2, {
            type: "line",
            data: {
                labels: ["Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec"],
                datasets: [{
                    label: "Files Opened",
                    tension: 0.4,
                    borderWidth: 0,
                    pointRadius: 0,
                    borderColor: "#cb0c9f",
                    borderWidth: 3,
                    backgroundColor: gradientStroke1,
                    data: [50, 40, 300, 220, 500, 250, 400, 230, 500],
                    maxBarThickness: 6

                },
                    {
                        label: "Files Closed",
                        tension: 0.4,
                        borderWidth: 0,
                        pointRadius: 0,
                        borderColor: "#3A416F",
                        borderWidth: 3,
                        backgroundColor: gradientStroke2,
                        data: [30, 90, 40, 140, 290, 290, 340, 230, 400],
                        maxBarThickness: 6

                    },
                ],
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                legend: {
                    display: false,
                },
                tooltips: {
                    enabled: true,
                    mode: "index",
                    intersect: false,
                },
                scales: {
                    yAxes: [{
                        gridLines: {
                            borderDash: [2],
                            borderDashOffset: [2],
                            color: '#dee2e6',
                            zeroLineColor: '#dee2e6',
                            zeroLineWidth: 1,
                            zeroLineBorderDash: [2],
                            drawBorder: false,
                        },
                        ticks: {
                            suggestedMin: 0,
                            suggestedMax: 500,
                            beginAtZero: true,
                            padding: 10,
                            fontSize: 11,
                            fontColor: '#adb5bd',
                            lineHeight: 3,
                            fontStyle: 'normal',
                            fontFamily: "Open Sans",
                        },
                    },],
                    xAxes: [{
                        gridLines: {
                            zeroLineColor: 'rgba(0,0,0,0)',
                            display: false,
                        },
                        ticks: {
                            padding: 10,
                            fontSize: 11,
                            fontColor: '#adb5bd',
                            lineHeight: 3,
                            fontStyle: 'normal',
                            fontFamily: "Open Sans",
                        },
                    },],
                },
            },
        });
    </script>
    <script>
        var win = navigator.platform.indexOf('Win') > -1;
        if (win && document.querySelector('#sidenav-scrollbar')) {
            var options = {
                damping: '0.5'
            }
            Scrollbar.init(document.querySelector('#sidenav-scrollbar'), options);
        }
    </script>

{% endblock javascripts %}





